schema: '2.0'
stages:
  preprocess:
    cmd: python3 src/preprocess.py
    deps:
    - path: src/preprocess.py
      hash: md5
      md5: 03d8a24389e04e02031af2ceff48ac4e
      size: 4319
    params:
      config/preprocess.yaml:
        account_ids:
        - '49143'
        - '23777'
        - '4453'
        - '81813'
        - '89195'
        - '12167'
        - '23353'
        - '62537'
        - '47355'
        - '65210'
        data_columns:
        - account_id
        - contact_reason
        - email_sentence_embeddings
        data_path: data/classification_dataset
        data_version: v1
        embedding_pooling_type: mean
        min_tag_cnt: 10
        seed: 42
        target_name: contact_reason
    outs:
    - path: data/selected_tags.pkl
      hash: md5
      md5: a49de203835aa898299f88573e77a04e
      size: 9567
  train:
    cmd: python3 src/train.py
    deps:
    - path: data/selected_tags.pkl
      hash: md5
      md5: a49de203835aa898299f88573e77a04e
      size: 9567
    - path: src/train.py
      hash: md5
      md5: 482f38d61ffc2a93b827271a26a64e33
      size: 3508
    params:
      config/preprocess.yaml:
        account_ids:
        - '49143'
        - '23777'
        - '4453'
        - '81813'
        - '89195'
        - '12167'
        - '23353'
        - '62537'
        - '47355'
        - '65210'
        data_version: v1
        embedding_pooling_type: mean
        min_tag_cnt: 10
        seed: 42
        target_name: contact_reason
      config/train.yaml:
        experiment_name: classificaton_project
        models:
        - LogisticRegression
        - SVC
        pca_n_components: 120
        tags_path: data/selected_tags.pkl
        train_path: data/train
    outs:
    - path: data/model_pipelines.pkl
      hash: md5
      md5: 5fb994113e4bbc02cf18a435a630f942
      size: 36952698
  evaluate:
    cmd: python3 src/evaluate.py
    deps:
    - path: data/model_pipelines.pkl
      hash: md5
      md5: 5fb994113e4bbc02cf18a435a630f942
      size: 36952698
    - path: src/evaluate.py
      hash: md5
      md5: c6a7eb87352297f6a9edb4ae88b8c0ad
      size: 3837
    params:
      config/evaluate.yaml:
        model_path: data/model_pipelines.pkl
        result_path: data/model_pipeline_performance_results.csv
        result_path_track: results/model_pipeline_performance_results.csv
        test_path: data/test
      config/preprocess.yaml:
        account_ids:
        - '49143'
        - '23777'
        - '4453'
        - '81813'
        - '89195'
        - '12167'
        - '23353'
        - '62537'
        - '47355'
        - '65210'
        seed: 42
      config/train.yaml:
        experiment_name: classificaton_project
    outs:
    - path: data/model_pipeline_performance_results.csv
      hash: md5
      md5: 14717422c90173e767625f0addca2fd5
      size: 63176
