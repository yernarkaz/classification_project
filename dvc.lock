schema: '2.0'
stages:
  preprocess:
    cmd: python3 src/preprocess.py
    deps:
    - path: src/preprocess.py
      hash: md5
      md5: 3aaccc5f6ade28a1d11e821d70906ce2
      size: 5061
    params:
      config/preprocess.yaml:
        account_ids:
        - '49143'
        - '23777'
        - '4453'
        - '81813'
        - '89195'
        - '12167'
        - '23353'
        - '62537'
        - '47355'
        - '65210'
        data_columns:
        - account_id
        - contact_reason
        - email_sentence_embeddings
        data_path: data/classification_dataset
        data_version: v1
        embedding_pooling_type: mean
        min_tag_cnt: 10
        seed: 42
        target_name: contact_reason
    outs:
    - path: data/selected_tags.pkl
      hash: md5
      md5: a49de203835aa898299f88573e77a04e
      size: 9567
  train:
    cmd: python3 src/train.py
    deps:
    - path: data/selected_tags.pkl
      hash: md5
      md5: a49de203835aa898299f88573e77a04e
      size: 9567
    - path: src/train.py
      hash: md5
      md5: ab39f846460bb5ffd06b4019249b550e
      size: 6391
    params:
      config/preprocess.yaml:
        account_ids:
        - '49143'
        - '23777'
        - '4453'
        - '81813'
        - '89195'
        - '12167'
        - '23353'
        - '62537'
        - '47355'
        - '65210'
        data_version: v1
        embedding_pooling_type: mean
        min_tag_cnt: 10
        seed: 42
        target_name: contact_reason
      config/train.yaml:
        experiment_name: classificaton_project
        model_data_path: data/model_pipelines.pkl
        model_result_path: results/models/model_pipelines.pkl
        models:
        - LogisticRegression
        - SVC
        pca_n_components: 120
        tags_path: data/selected_tags.pkl
        train_path: data/train
        tune:
          n_splits: 3
          n_repeats: 3
          n_iter: 5
          overdone_delta: 0.01
          time_limit: 60
    outs:
    - path: data/model_pipelines.pkl
      hash: md5
      md5: eab575649d5d58e5c4b7a6db5a4d9a82
      size: 38168519
  evaluate:
    cmd: python3 src/evaluate.py
    deps:
    - path: data/model_pipelines.pkl
      hash: md5
      md5: eab575649d5d58e5c4b7a6db5a4d9a82
      size: 38168519
    - path: src/evaluate.py
      hash: md5
      md5: 45995e92447d5ffe6baa7739e5ada6ce
      size: 4366
    params:
      config/evaluate.yaml:
        model_path: data/model_pipelines.pkl
        result_path: data/model_pipeline_performance_results.csv
        result_path_track: results/model_pipeline_performance_results.csv
        test_path: data/test
      config/preprocess.yaml:
        account_ids:
        - '49143'
        - '23777'
        - '4453'
        - '81813'
        - '89195'
        - '12167'
        - '23353'
        - '62537'
        - '47355'
        - '65210'
        seed: 42
      config/train.yaml:
        experiment_name: classificaton_project
    outs:
    - path: data/model_pipeline_performance_results.csv
      hash: md5
      md5: 60cb2a4fa50c93020201200364234d16
      size: 63279
